(()=>{var e={257:e=>{e.exports={printWeather:function(e){document.querySelector(".main__title").innerHTML=e.location,document.querySelector(".main__temperature").innerHTML=`${e.temperature} &#8451;`,document.querySelector(".main__img").style.backgroundImage=`url(${e.icon})`,document.querySelector(".inform__time").innerHTML=`Time: ${e.time}`,document.querySelector(".inform__pressure").innerHTML=`Pressure: ${e.pressure} MB`,document.querySelector(".inform__feelslike").innerHTML=`Feels like: ${e.feelslike} &#8451;`,document.querySelector(".inform__weather").innerHTML=`Today is ${e.discription}`,document.querySelector(".wind-direction").innerHTML=`Wind: ${e.windDir}`,document.querySelector(".wind-speed").innerHTML=`Speed: ${e.windSpeed} km/h`}}}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,r),i.exports}(()=>{const e=/[0-9]/g,{printWeather:t}=r(257);function o(e){this.location=`${e.location.country}, ${e.location.region}`,this.temperature=e.current.temperature,this.windDir=e.current.wind_dir,this.windSpeed=e.current.wind_speed;const t=e.current.weather_icons[0];this.icon=t,this.time=e.location.localtime.slice(11,16),this.pressure=e.current.pressure,this.feelslike=e.current.feelslike,this.discription=e.current.weather_descriptions}let n=[];localStorage.getItem("history")&&(n=JSON.parse(localStorage.getItem("history")));const i=r=>{const i=document.querySelector(".header__input--city").value||r;i.match(e)||fetch(`http://api.weatherstack.com/current?access_key=8b381b83f1d5a8436bbb94c6d780f9e4&query=${i}`).then((e=>e.json())).then((e=>{const r=new o(e);var i;t(r),i=r,n.unshift(i),n.length=5,localStorage.setItem("history",JSON.stringify(n)),console.log(n)}))};function c(e,t){!0===document.getElementById(`${e}`).checked&&document.querySelector(`.a${e}`).classList.remove("none"),t.querySelectorAll("input[type=radio]").forEach((e=>{e.checked||document.querySelector(`.a${e.id}`).classList.add("none")}))}function u(e){localStorage.setItem("page",e)}document.querySelector(".header").addEventListener("click",(e=>{e.target===document.querySelector(".my-weather__btn")&&navigator.geolocation.getCurrentPosition((e=>{i(`${e.coords.latitude.toFixed(4)},${e.coords.longitude.toFixed(4)}`)})),e.target===document.querySelector(".header__btn")&&(i(),document.querySelector(".header__input--city").value="",document.querySelector(".header__input--country").value=""),e.target===document.querySelector(".open-history-btn")&&(document.querySelector(".history").classList.add("history__open"),document.querySelector(".history__wrap").classList.add("history__open"),n.forEach((e=>{document.querySelector(".history__ul").insertAdjacentHTML("beforeend",`<li class="history__li">\n                                                                                <p class="history__name border">${e.location}</p>\n                                                                                <p class="history__temperature border">${e.temperature} &#8451;</p>\n                                                                                <p class="history__weather border"><img src="${e.icon}" class="history__weather-icon"></p>\n                                                                                <p class="history__wind border">${e.windSpeed} km/s ${e.windDir}</p>\n                                                                            </li>`)}))),e.target===document.querySelector(".open-notification-btn")&&(localStorage.removeItem("disable"),document.querySelector(".notification").style.display="block"),e.target===document.querySelector(".clear-local-btn")&&(localStorage.removeItem("history"),location.reload())})),document.querySelector(".header__input--city").addEventListener("keypress",(e=>{"Enter"===e.key&&(i(),document.querySelector(".header__input--city").value="",document.querySelector(".header__input--country").value="")})),document.querySelector(".header__input--country").addEventListener("keypress",(e=>{"Enter"===e.key&&(i(),document.querySelector(".header__input--city").value="",document.querySelector(".header__input--country").value="")})),document.querySelector(".history__close-btn").addEventListener("click",(()=>{document.querySelector(".history").classList.remove("history__open"),document.querySelector(".history__wrap").classList.remove("history__open"),document.querySelector(".history__ul").innerHTML=""})),fetch("./MOCK_DATA.json").then((e=>e.json())).then((e=>{for(let r=0;r<e.length;r++)document.querySelector(".notification").innerHTML+=` <div class="notification__inform none a${t=r}">\n                <h2 class="notification__title">${t+1}. ${e[r].title}</h2>\n                <p class="notification__text">${e[r].phrase}</p>\n            </div>`,document.querySelector(".pages").innerHTML+=`<input type = 'radio' id = '${r}' name = 'input'>`;var t;const r=document.querySelector(".pages");localStorage.getItem("page")?c(localStorage.getItem("page"),r):c(0,r),"true"===localStorage.getItem("disable")&&(document.querySelector(".notification").style.display="none"),document.querySelector(".notification").addEventListener("click",(e=>{if(e.target===document.querySelector(".notification__close-btn")&&(document.querySelector(".notification").style.display="none"),e.target===document.querySelector("input[type=radio]:checked")&&(c(e.target.id,r),u(e.target.id)),e.target===document.querySelector(".left-btn")){let e=document.querySelector("input[type=radio]:checked").id-1;e<0&&(e=r.querySelectorAll("input").length-1),c(e,r),u(e)}if(e.target===document.querySelector(".right-btn")){let e=Number(document.querySelector("input[type=radio]:checked").id)+1;e+1>r.querySelectorAll("input").length&&(e=0),c(e,r),u(e)}e.target===document.querySelector(".notification__disable")&&localStorage.setItem("disable","true")}))}))})()})();